---

- name: Install packages for Apache
  become: true
  yum:
    name: "{{ centos_apache_packages }}"
    state: present

- name: Ensure httpd is running.
  become: true
  service:
    name: httpd 
    state: started
    enabled: yes

- name: Open port 80 in the firewall, for http access.
  become: true
  firewalld:
    service: http
    permanent: true
    state: enabled

- name: Copy Virtualhost config
  become: true
  ansible.builtin.copy:
    src: alma.com.conf
    dest: "{{ httpd_config_directory }}"
    mode: '0644'
